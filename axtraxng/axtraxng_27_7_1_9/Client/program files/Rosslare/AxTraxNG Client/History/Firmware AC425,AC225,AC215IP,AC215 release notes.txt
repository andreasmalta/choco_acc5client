

;---------------------------------------------------------------
Firmware Version History:
;---------------------------------------------------------------
Version:  ac225v00_00
Date:     3-4-06
* Integrating IO-Board functions and communication 39h command.

Version:  ac225v00_01
* Input from IO Board still not working. Fix that.

Version:  ac225v00_02
Date:     06-04-06
* Stop bit added on IO board detection frame sent from init.
* Function ClearUsersAPBTimeStamp() updated.
* Updated WriteTriggerDefaults() to rom constants method.
* Change loading data initializations to table Read (Rom Constant)
  method to save code space.

Version:  ac225v00_04
Date:     11-04-06
* New AC-225 hardware used.
* Header file changed to work with new hardware.

Version:  ac225v00_05
Date:     16-04-06
* Not good version!
* Minor changes.

Version:  ac225v00_06
Date:     23-04-06
* Minor changes, Based on version 4.

Version:  ac225v00_07
Date:     24-04-06
* Eliminated Slow I2C driver (100KHz) for IO board. Now using
  standard driver (400KHz).

Version:  ac225v00_08
Date:     24-04-06
* Slow I2C driver (100KHz) for IO board re-used due to problems
  with standard driver.

Version:  ac225v00_09
Date:     26-04-06
* Changing AUXR value to use 1K XRAM (default is 762 bytes).

Version:  ac225v00_10
Date:     27-04-06
*** IFSEC VERSION ***
* Version is debug version, cannot be downloaded by bootloader.
* Implement INT1 interrupt for readers.
* Changed Startup.a51 file - intialize AUXR to 1K XRAM on beginning
  of Startup.a51 file, so that all XRAM cleared.
* Updated reply to communication command 6Eh, added bit BIOBoard
  if IO Board installed.

Version:  ac225v00_11
Date:     -04-06
* CHIP_VERSION.
* Downloading firmware by Bottloader succeeds.
* Cancelled PCA interrupt enable flag.
//* Removed function InitEEpromPage(). This function is wrong !!!

Version:  ac225v00_12
Date:     29-05-06
* Function RefreshOutputs() now checks two output bits per output and
  makes "OR" between them.
* ScanTriggerTable() now always called, even when no IO-Board connected.

Version:  ac225v00_13
Date:     29-05-06
* Re-arrange general input/output registers in order to isolate
  from dedicated output functions registers.
* Panel outputs activated either by their original function
  and also by general purpose inputs.
* IO-Board outputs may be activated by panel inputs in addition to
  IO-Board Inputs.
Bug Fix:
* On reset, general purpose outputs are no longer activated.

Version:  ac225v00_14
Date:
* Removed all IO-board defaults.
* Add "Toggle" operation to general purpose outputs.

Version:  ac225v00_16
Date:     2-7-06
* Input Abort Delay timer moved from communication command 39h
  to command 56h.
* Added Input.ActivityDelay timers. Not tested.
Bug Fix:
* Fix door antipassback bug as done in ac-215v14. Not tested.

Version:  ac225v00_19
Date:     -7-06
* Eliminated function ScanTriggerTable().
* Enalrged Triggers array to include Readers and Doors, now XRAM used
  beyond 1K byte, must use AT89C51RD2 Emulator.
* Changed Triggers.c according updated command 39h (v04) format.

Version:  ac225v00_20
Date:     -7-06
* Add general output activation by timezone.

Version:  ac225v00_22
Date:     3-8-06
* Enlarged XBuff to 72 bytes.
* Adding Trigger Compare algorithm on receiving UpdateTriger command 39h.
  This helps to abort active operations tha are active.
* Output activation by timezone works fine.
* Inputs start delay functions well (beside communication 56h from PC).

Version:  ac225v00_23
Date:     9-8-06
* Sounder Triggers added.

Version:  ac225v00_24
Date:     9-8-06
* Reader Triggers added.
* Added flag BAccessGranted into Door[CurrentDoor].VarDoorData.BitsDoor.

Version:  ac225v00_25
Date:     9-8-06
* Updated SetBit() and ClearBit() functions, which saves over 0.5Kbytes.
* Created new bits to be used by Trigger operations. Some of these bits
  are duplicates of existing bits that may be removed in the future.

Version:  ac225v00_26
Date:     13-8-06
* Reduced XDATA memory size to less than 0x400 bytes, in order to use
  old emulator probe:
  1) Updated bios.c to eliminate TestModemResultCode() and InterruptBuff[]
        to reduce xdata size.
  2) Reduced XBuff size.
* Fixed Reader tamper but not tested due to emulator problem.
* Reader Bell key operation added.

Version:  ac225v00_27
Date:     16-8-06
* Implement updated manual operations command 22h. Not tested.
* Inputs arm/disarm not yet implemented.
* Removed old manual operation commands 22h, 24h and 28h.

Version:  ac225v00_28
Date:     -8-06
* Implement updated User Properties command 34h. Not tested.
* PIN code previously stored in two locations. Now stored only once.
* Added setting TAMPER_READER1/2 if 0, this is done to to probe
  XD2 problem.
* Command 22h open outputs tested:
  1)Momentarily openning takes default Timer of output. Need to change
    in future.
  2) Events for mometary opening not implemented. Need to fix in future.

Version:  ac225v00_29
Date:     21-8-06
* New communication command 3Dh - Send Output Group. Command data
  stored directly in EEprom.

Version:  ac225v00_30
Date:     22-8-06
* Add implementation of Output Groups activation.

Version:  ac225v00_32
Date:     23-8-06
* Implement User Counters. Not tested yet.
* Not implemented:
  1) Access Denied event due to counter elapsed.
  2) Disable changing User Counters on download, unless explicitly
     asked for. Should consider updating counters from distinct
     communication command!
  3) Communication command used to display current user's counters.
  4) Settund Readers as "Watch Counter" or none. Counters are updated
     and checked only in readers defined as "Watch Counter".
Bug fix:
* Fixed Data storage in response to communication command 56h.
* Firmware flag in flash ROM was written every power-on reset.
  Now fixed, in similar to AYC-W6500 firmware ayx6500-00-01-33.hex.

Version:  ac225v00_33
Date:     24-8-06
* Updating and Blocking Users with elapsed counters only in readers
  defined as "Watch Counter". Currently "Watch Counter" are all
  "IN" readers.

Version:  ac225v00_34
Date:     28-8-06
* Updated communication command 3Dh. Not tested.
* New communication command 3Bh, very similar structure with 3Dh. Not tested.
* Handicapped function implemented. Not tested.

Version:  ac225v00_35
Date:     28-8-06
To do:
* Solve problems of events defined in one reader are activated from
  both readers.
* Completed "Handicapped" implementation.
*

Version:  ac225v00_36
Date:     28-8-06
* Inputs arm/disarm state implemented. Need to decide how this affects
  their operations.

Version:  ac225v00_37
Date:     29-8-06
* Manual operation command 22hv00 split into: 22h,23h,24h and 25h.
  (Access Group part in commands not implemented).
* Door alarms using links. Need to check Ajar/ajar warninig operation
  and add chime operation interval in ajar warnning.

Version:  ac225v00_38
Date:     4-9-06
* Add "Master User" in command 34h.
* Add "Master User" in command 39h under Reader events.
* Update Command 39h with operation type "Reader no access".

Version:  ac225v00_39
Date:     5-9-06
* Reader leds on panel are flashing anytime a reader is in
  SECURE MODE or in NO-ACCESS MODE. Previously flashing was only
  when reader was in SECURED MODE due to timezone.
* Reader status may be changed by input as defined in command 39h.
* New reader process (new file reader.c).

Version:  ac225v00_40
Date:     6-9-06
* Access denied when reader in NO-ACCESS mode.
* Implement new communication command 5Ah.
* Updated and simplified function TestFacilty().
* Now each reader has 4 16bits Facility Codes.
* Four Facility Codes in both Wiegand 26 bits and HID Corporate 1000
  format.

Version:  ac225v00_41
Date:     6-9-06
* Implement new communication command 38h.

Version:  ac225v00_42
Date:     10-9-06
* Re-arranged reader registers array for constant reader parameters.

Version:  ac225v00_43
Date:     11-9-06
* Updated general purpose outputs activation process, integrating it
  into GeneralOutputPr():
  Some outputs rules:
  1) Manual operations has highest priority.
  2) If output is permannently ON, it will not be closed at end of
     momentary operation.
* Fixed Output permanently ON/OFF not working.
* Functions removed:
        TestChimeAlert(). OK.
        Chime on access granted (code.c L1292). OK!
        Chime on input (input.c L187). OK!
        ClearAlarm(). Need to change command.
        TestAuxTimezone(). Check BFirstentryUnlock/BWaitFirstEntry. OK!
        OutputAlarmPr().
        OutputAuxiliaryPr().
        OutputGeneralPr().

Version:  ac225v00_44
Date:     12-9-06
* Changed LockerPr() to work together with GeneralOutputPr() on door outputs.
  Door output is ORed between these two triggers.
* Re-implemented chime on Door Hold Open warning - chime every 4 seconds
  for 1 minute duration.

Version:  ac225v00_45
Date:     12-9-06
* PC: Update PC command 39H byte 11 with value 0x05-"Chime Repeat".
* Re-implemented BFirstEntryUnlock in triggers.c.
* TestAuxTimezone() now removed.

Version:  ac225v00_46
Date:     17-9-06
* Re-implemented communication command C1h - update panel
  status report, including IO-Board support.

Version:  ac225v00_47
Date:     18-9-06
* Updated functions UpdateReaderSettings() and LoadReaderSettings().
* Removed function PrInputAlarm().

Version:  ac225v00_48
Date:     18-9-06
* implementation of conditional inputs operation when disarmed, only
  in Trigger operations.
* Completed implementation of Inputs manualy disarming.

Version:  ac225v00_49
Date:     20-9-06
* Fixed outputs activation by trigger in toggle and timer modes.
* Updated Communication 38h, now IN2 Tamper enable added.
* Restored function PrTamper().
* Updated User Counters handling and Communication command 0x34.

;---------------------------------------------------------------
; Magor version change: New events protocol
;---------------------------------------------------------------
Version:  ac225v01_00
Date:     21-9-06
* Updated events protocol implemented. Not tested!
  1) Changed existing events.
  2) Added new events.
  3) Deleted some events.

Version:  ac225v01_01
Date:     26-9-06
* Implemented new event protocol (most of it).
* Inputs open/closed events during disarmed state now filtered out.
* Deleted communication commands 60h/B1h and associated function
  SendDoorsStatus().
* Updated communication command D1h.

Version:  ac225v01_02
Date:     15-10-06
* Debugging Manual Reader modes events.

Version:  ac225v01_03
Date:     16-10-06
* Debugging StoreEvent() function:
* Changed Real Antipassback.

Version:  ac225v01_04
Date:     16-10-06
* Changed Real antipassback slightly.
* Some minor changes.

Version:  ac225v01_05
Date:     18-10-06
* Fixed Reader mode events and mode changing.
* Card+PIN mode not functioning well.

Version:  ac225v01_06
Date:     19-10-06
* Closing Outputs from Output Group, only first output closing event
  reported.
* IN2 activation generates tamper, regardless of it's definition.
  Problem no longer observed.
* Fixed event door open by timezone (Triggers.c).

Version:  ac225v01_07
Date:     22-10-06
* Fixed problem: Outputs.C line 346, door closed event generated even when
  door open by timezone.

Version:  ac225v01_08
Date:     22-10-06
* Fixed OutputInTimezone/InputInTimezone registers not cleared on deleting
  their respective triggers.
* LockerPr() updated so that double door open/close events are avoided.

Version:  ac225v01_09
Date:     23-10-06
* Added registers OutputInTimezoneEnable/InputInTimezoneEnable
  to help handling Input/Output timezone operation when Link
  settings are changed.

Version:  ac225v01_10
Date:     23-10-06
* Removed IN2 tamper and PrTamper().
* Add new communication command 37h (Update panel).
* Modify communication command 5Ah.

Version:  ac225v01_11
Date:     23-10-06
* Fixed function LoadReaderSettings() which was overwriting some
  registers.
* Debugged Door antipassback defined by communication command 37h.

Version:  ac225v01_12
Date:     24-10-06
* Entering Trigger process once in second only.

Version:  ac225v01_13
Date:     25-10-06
* Updated timezone triggers to work in similar way to other triggers type.
  Need to complete timezone status bits mechanism.

Version:  ac225v01_14
Date:     -10-06
* Updated timezone triggers to work in similar way to other triggers type.
  Need to complete timezone status bits mechanism.

Version:  ac225v01_15
Date:     26-10-06
* Attempts to solve Input by timezone triggers problems.

Version:  ac225v01_16
Date:     26-10-06
* Input by timezone triggers problems seems to be solved.

Version:  ac225v01_17
Date:     26-10-06
* fix outputs by timezone triggers problems.

Version:  ac225v01_18
Date:     29--10-06
* Inputs operations during disarmed state now filtered out
  on Rex/Door Alarms/Interlock/Input Tamper.

Version:  ac225v01_19
Date:     29-10-06
* Updated TriggerOperation() to cover most possible conditions such
  deleting link, editing link, changing timezone and so on.
* Events removed 41h, 42h, 45h, and 46h.

Version:  ac225v01_20
Date:     30-10-06
* Fixed Input/Output Group activation.
* Fixed Output ON and Output OFF (previously was turned on and
  immediatly off) condition by reader events such Handicapped,
  outputs ON, outputs OFF and more.

Version:  ac225v01_21
Date:     30-10-06
* Fixed Output Open/Close links operation.
* Fixed Input/Output Group operation on second group and higher.

Version:  ac225v01_23
Date:     31-10-06
* Changed LockerPr() function for correct events saving when door
  alreadey open by timezone or manual operation.

Version:  ac225v01_24
Date:     -11-06
* Implemented First person delay on door timezone.
* In PC: Inputs abort delay changing does not send communication
  command.
* In PC: Door manual operation change default to "momentary".

Version:  ac225v01_25
Date:     5-11-06
* Some changes in events values.

Version:  ac225v01_26
Date:     5-11-06
* New event filter implemented.
* Added Event filter enable in offline/online modes.
* Fixed events due to manual output activation.

Version:  ac225v01_27
Date:     20-11-06
Bug fix:
* Updated ManOutputStat register in function GeneralOutputPr().

Version:  ac225v01_29
Date:     21-11-06
* This version sent to customer "Reader Options".
Bug fix:
* Did not call ManOutputStat from main on outputs 5 to 8.
* Updated ManOutputStat register in function GeneralOutputPr().
* Door2 event location was OUT1A instead of OUT2.
* Updated TriggerOperation() slightly.
* Updated UpdateDoorSettings() slightly.
* Updated TestInterLock() slightly.



;---------------------------------------------------------------
; ac225v02: Major version change: Firmware executes in X2 mode.
;           Based on version ac225v01_26.
;---------------------------------------------------------------
Version:  ac225v02-00
Date:     11-06
* New I2C drivers intended for X2 mode.

Version:  ac225v02-01
Date:     16-11-06
* New I2C drivers intended for X2 mode.
* IO Board using 400KHz X2 driver (file i2c400kx2.c). Acknowledge OK.

Version:  ac225v02-02
Date:     16-11-06
* Updated SCL waveform in function i2crxbyte() in file i2c400kx2.c.

Version:  ac225v02-03
Date:     16-11-06
* Restored X1 mode.
* Restored lockal outputs activations.

;---------------------------------------------------------------
; ac225v00-03 - Major version change: New hardware
; Hardware - AC-225, PN/0101-2000025+01, November 2006
;---------------------------------------------------------------
Version:  ac225v00-03-00
Date:     19-11-06
* Changed IO ports settings to work on new hardware.

Version:  ac225v00-03-01
Date:     20-11-06
* Hardware modified - RTCC using SCL2 instead of SCL.
* Old io-board driver now used with SCL replaced with SCL2
  (file i2ciob.c).

Version:  ac225v00-03-02
Date:     21-11-06
* SCL not toggling on I2C read bytes in emulator "run", but does work
  on single stepping by emulator. Fixed by adding "NOP" in SCL and
  SCL2 toggling in i2c400kX1.c.
Bug fix:
  Adding changes from version 00-01-29:
* Did not call ManOutputStat from main on outputs 5 to 8.
* Updated TriggerOperation() slightly.
* Updated TestInterLock() slightly.
* Updated UpdateDoorSettings() slightly.
* Door2 event location was OUT1A instead of OUT2.

Version:  ac225v00-03-03
Date:     23-11-06
* Added new events 0x87 "communication failed"  and 0x88 "communication
  restored". Not tested.
* Updated event filter with events 0x87 and 0x88.

Version:  ac225v00-03-04
Date:     23-11-06
* Updated Readers driver to work in new hardware, using KBD interrupt
  insteade of INT1 interrupt.

;---------------------------------------------------------------
; ac225v00-04 - Major version change: Using serial flash
;---------------------------------------------------------------
Version:  ac225v00-04-00
Date:     -06

Version:  ac225v00-04-01
Date:     04-12-06
* Created general functions - ReadBlock/WriteBlock to read/write either
  24LC512 serial EEprom and AT45DB161D serial flash. Memory device
  selected by read/write address. If Address MSB bit (Address is 64bits)
  is clear, serial EEprom selected, otherwise serial flash selected.
* New header file used: "at89c51xd2.h".

Version:  ac225v00-04-02
Date:     04-12-06
* Using the new ReadBlock() function (meanwhile in serial eeprom
  only).
* Altering memory organization:
  Moving some global vars to xdata.
  Moving some local vars to xdata.
  This is done to  to enlarge stack space and free some "data" memory
  for local vars.

Version:  ac225v00-04-03
Date:     04-12-06
* Using the new WriteBlock() function (meanwhile in serial eeprom
  only).

Version:  ac225v00-04-04
Date:     05-12-06
* Using the new WriteBlock()/ReadBlock() function to write and read
  from serial flash.
* Call .h files from main.h .
* Change Port 0.0 intialization value to "0".
* Change Watchdog pulse pattern from LOW-HIGH into HIGH-LOW.

Version:  ac225v00-04-05
Date:     10-12-06
* Updated StoreDoorDefaults() and LoadDoorDefaults().
* Stretched Acknowlege pulse in i2c400kx1.c/i2c400kx2.c.
* Changed card search algorithm to work on flash.
Bug Fix:
* Fix StoreDoorDefaults()- add open time default.
* Cleared INT1 interrupt which is no longer used, this un-handled
  interrupt when setting INT1 pin for CS of serial flash.

Version:  ac225v00-04-06
Date:     10-12-06
* Minor changes.

;---------------------------------------------------------------
; ac225v00-05 - Major version change: Support 30000 Users, 5000 Events.
;---------------------------------------------------------------
Version:  ac225v00-05-00
Date:     14-12-06
* Re-aranged flash memory addresses to support 30000 Users (but now
  only 5000 Users supported).
* Remove access group command 3Ch and update command 34h with timezone
  per reader instead of 3Ch.
Bug Fix:
* Updated StoreOutputGroupsDefaults() with correct memory address.

Version:  ac225v00-05-01
Date:     14-12-06
* Updated Tester.c, now added io-board testing and intializing serial
  flash. NOT TESTED.
Bug Fix:
* Updated StoreInputsSettings().

Version:  ac225v00-05-02
Date:     18-12-06
* Updated multi-panel commands: 32h, 34h, 3Ah, 3Eh, 68h, E9h.
* Removed commands: 6Ch, 6Eh.

Version:  ac225v00-05-03
Date:     19-12-06
* Eliminated multi-panel commands.
* Updated function StoreTriggersDefaults() - now in flash.
* Updated function ClearUsersAPBTimeStamp() - now in flash.
* Updated function UpdateRetFactory().
* Function ReadMaxUserPIN() - contents deleted.
* Deleted Function ScanMemCleanArea().

Version:  ac225v00-05-04
Date:     19-12-06
* Change Serial Flash Addresses to support 30000 Users.
* Change Serial EEprom Addresses to support 30000 Users.
* Moved E2_TIMED_APB_READER to serial flash, check endurance issue.
* 30000 cards supported.

Version:  ac225v00-05-05
Date:     20-12-06
* Fixed operation with 30000 Users.
* Updated function SPIRx8Bytes() into SPIRxMultipleBytes(x), now it supports
  reading 4 or 8 bytes according parameter x sent.
* ClearUsersAPBTimeStamp() activated. This takes long time on reset.
* 30000 PIN codes supported.

Version:  ac225v00-05-06
Date:     21-12-06
Bug fix:
* Program did not work on programmed IC but worked on emulator. Fixed
  by setting AUXR initialization to support 1792 bytes RAM
* Added clear watchdog in ClearUsersAPBTimeStamp().
* Updated Tester.c, io-board testing supported.

Version:  ac225v00-05-07
Date:     21-12-06
* Updated communinication command EBh.
* Removed Event Category 0x62.

Version:  ac225v00-05-08
Date:     24-12-06
* Add communication commands 66h/E7h to test User's counter value.

;---------------------------------------------------------------
; ac225v00-06 - Major version change: Support 20000 Events in Flash.
;---------------------------------------------------------------
Version:  ac225v00-06-00
Date:     24-12-06
* Events now stored in flash and enlarged buffer to 20000.
* Updated and simplified ReadLastActualEvent().
* Changed "LastSentEvent" storage method. Now stored in a dedicated
  memory buffer. Relevant "LastSentEvent"is always in parallel address to
  "LastActualEvent".
* All changes not fully tested!

Version:  ac225v00-06-01
Date:     26-12-06
Bug Fix:
* Could not read Clock&Data readers. Fixed.

;---------------------------------------------------------------
; ac225v00-07 - Major version change: CPU running at X2 speed.
Events in Flash.
;---------------------------------------------------------------
Version:  ac225v00-07-00
Date:     24-12-06
* Updated ReadInputsMux() - added delay for operation in X2 mode.
* Added delay at init.c.

Version:  ac225v00-07-01
Date:     27-12-06
* Now LastActualEvent is derived from LastSentEvent memory storage
  area.
Bug Fix:
* Updated events protocol saving and events pointers handling.

Version:  ac225v00-07-02
Date:     28-12-06
* Updated WriteBlock() - program stops if any memory write error occurs.
Bug fix:
* Sending timezone overwritten door timers.
* Cleared to "0" empty events.

;---------------------------------------------------------------
; ac225v00-08 - Major version change:
;---------------------------------------------------------------
Version:  ac225v00-08-00
Date:     31-12-06
* Added Event 0x63 Trigger Alarm.
* Added Antipassback events in links.
* hanged communication speeds 38400 to 115200bps.

Version:  ac225v00-08-01
Date:     2-1-07
* Added algorithm to refresh flash memory inside WriteBlockAT45().

Version:  ac225v00-08-02
Date:     2-1-07
* Changed ReadBlock/WriteBlock to support operation on full page length
  of serial flash for faster operation.

Version:  ac225v00-08-03
Date:     3-1-07
* Updating algorithm to refresh flash memory inside WriteBlockAT45().

Version:  ac225v00-08-04
Date:     3-1-07
* Updating algorithm to refresh flash memory pages. Now called once a minute
  and is much faster.
* ClearUsersAPBTimeStamp() - Now faster due to updated WriteBlockAT45().

Version:  ac225v00-08-06
Date:     4-1-07
* Cancelled door ajar warnning.
* Removing Door alarm enable bits from communication command 38h.
Bug fix:
* Updated init.c io-board stop bit.
* IO-board still loosing contact with master. IO-Board with Emulator works fine!

Version:  ac225v00-08-07
Date:     7-1-07
* Now IO-Board uses 400KHz I2C driver (deleted file i2ciobx2.c).
Bug fix:
* Aadded delay at end of I2CTxByteRTCC()/I2CTxByte(), IO-Board now works fine with
  emulator and programmed IC.

Version:  ac225v00-08-08
Date:     8-1-07
* Reader tamper + Alarm enabled generated multiple alarm events. Fixed.
* Removed event 57h.
* Removed events 61h/03h and 62h/03h.
* Re-impleamented forced/ajar enable bits.

Version:  ac225v00-08-09
Date:     8-1-07
* Added new reader formats (40bit PCSC and 64bits).
* Added option for Arm Input by Links, Timed armed and toggle Arm.

;---------------------------------------------------------------
; ac225v00-09 - Major version change: New PCB No. 0101-2000025+02
;				      Antipassback events changes
;---------------------------------------------------------------
Version:  ac225v00-09-00
Date:     9-1-07
* Eliminated antipassback events starting with event category 0x61.
* Added antipassback information on access granted/denied events.
* Changed Clock.c so that RTCC uses SCL line instead of SCL2.

Version:  ac225v00-09-01
Date:     10-1-07
* Updated slightly i2c400kx2.c to work with RTCC.

Version:  ac225v00-09-02
Date:     10-1-07
* Updated tester.c: Real Time Clock tested if responding (time management
  not tested).
* Updated tester.c: Chime herd if intial hardware test passes.
* Remove READER1_TAMPER test on reset.
Bug fix:
* Updated SetAPBForgive.c, did not clear APB of all Users.
* Changed all events with byte8 00 into 01.

Version:  ac225v00-09-03
Date:     16-1-07
* Updating handling ADDR_FIRMWARE_STAT so that bootprocess on new device
  works on first try.
* Eliminated testing 3 first ROM addresses which holds bootloader
  program start.

;---------------------------------------------------------------
; ac225v00-10 - Major version change:
;---------------------------------------------------------------
Version:  ac225v00-10-00
Date:     18-1-07
* Added 4 bits Keypad receive format.
* Added "Rex open door disable".
* Add User Counter status checking and display in PC.

Version:  ac225v00-10-01
Date:     21-1-07
* This is base version used for new AC-215 firmware.
Bug fix:
* Panel not responding if more than one panel on network. Problem fixed.

Version:  ac225v00-10-02
Date:     23-1-07
* Split SearchCard() and SearchPIN() to five stages for "compatibility"
  with AC-215 search. Not tested.
* Removed unnecessary comments.
* Made files identical to AC-215 as much as possible for easier
  maintanance in the future.

Version:  ac225v00-10-03
Date:     25-1-07
* Added testing hardware type functiopn RetHardwareType().
* Update communication EBh, adding hardware type.

;---------------------------------------------------------------
; ac225v00-11 - Major version change: AC-215 and AC-225 projects
;		combined, most files identical to make version
;		changes on products easier.
;---------------------------------------------------------------
Version:  ac225v00-11-00
Date:     28-1-07
* Changed header files structure.
* Make single project for AC215 and AC 225.
* Conditional call to function E2_FlashPageRefresh().
* Conditional call to function E2_ReadeRefreshCounter().
* Conditional call to function ScanDigitalInputs().
* Conditional call to RTCC routines to use SCL/SCL2.
* Conditionaly setting Number of Users, cards and PIN
  according hardware.
* Updated UpdateRetFactory() at erasing memory section.
* Updated ReadBlock() to eliminate flash routines.
* Updated WriteBlock() to eliminate flash routines.
* Updated SearchPIN().
* Updated SearchCode().
* Updated Code.c at case ZCodeCardEntered/ZCodePINEntered to perform
  card/PIN search in 5 stages.

Version:  ac225v00-11-01
Date:     29-1-07
* Updated inputs reading process.
Bug fix:
* Inputs in AC215 V7 did not generate events.

Version:  ac225v00-11-02
Date:     30-1-07
Bug fix:
* siren activated on deleting links that activates siren. Fixed.
* Code.c - Card and PIN search problems fixed.

Version:  ac225v00-11-03
Date:     31-1-07
* Eliminated MaxCodeAddr/MaxPINAddr and it's associated algorithm.
* Added Event 0x89 - Buffer full.
* Eliminated saving BEventOverRun flag in E2_NV_FLAGS_START.

Version:  ac225v00-11-04
Date:     31-1-07
* In Tester program, Reader1 TAMPER input activates G.LED1
  output and DTR.
* In Tester program, Reader2 TAMPER input activates G.LED2.

Version:  ac225v00-11-05
Date:     5-2-07
* Temporarily setting event buffer to 20 events length for test
  purpose.
Bug Fix:
* Events pointer LastActualEvent rollover from 5000 to 0 (in ac215)
  or from 20000 to 0 (in ac225) was wrong (only in last few versions).
* Added algorithm to upload oldest events after PC detects event 0x89
  "Events memory full".

Version:  ac225v00-11-06
Date:     5-2-07
* Resetting event buffer back to 5000/20000 events.
* Set some new new defaults values to system. Now Inputs and Outputs
  default state is the same in single and double door panels.

Version:  ac225v01-00-00
Date:     11-2-07
* First released version based on version ac225v00-11-06.

Version:  ac225v00-11-07
Date:     11-2-07
* Updated User Counter handling.

Version:  ac225v00-11-08
Date:     12-2-07
* Updated method of saving LastActualEvent and LastSentEvent pointers.
Bug Fix:
* On reset Events pointer intialization wrong, which cause full upload.

Version:  ac225v00-11-09
Date:     13-2-07
Bug fix:
* InputMask rotate caused overwriting timezone bits. Fixed.
* On adding/erasing links, updated links operations (in command 39h).

Version:  ac225v00-11-10
Date:     -2-07
* PC: On setting "new panel", option to load events prior to setting
  "Enable panel".
* PC: In communication 39h, erasing links from one source does not
  change address of other links from same source.
Bug Fix:
* Link source "Input Idle" operation fixed.
* Link dwtination "Output Open" and "Output Closed" fixed.

Version:  ac225v00-11-11
Date:     25-2-07
Bug fix:
* Operations by Reader Bell did not work.

Version:  ac225v01-00-00
Date:     2-3-07
* Version 01-00-00 released to Beta site customer.

Version:  ac225v01-00-01
Date:     18-3-07
Bug fix:
* Links source event "Outputs" did not activate the defined destination.
* Eliminated double inputs events on reset.
* Wiegand 37 bits reader format fixed.

Version:  ac225v01-01-00
Date:     21-3-07
* Added new Links Source: Reader-Secured Mode.
* Add new Links Destination: Output-Swinging every 0.5 seconds.
* Updated communication command 39h.
Bug fix:
* Reader2 settings (E2_READER2_SETTINGS) was overwritng timezones settings.

Version:  ac225v01-01-01
Date:     22-3-07
* Added event 8Ah - event memory low level.
* Updated event filter to support event 8Ah.
Bug fix:
* Event filter for event 89h was not working.

Version:  ac225v01-01-02
* New triggers source added - panel events operations.
Bug fix:
* Output/input group address (E2_OUTPUT_GROUP_START) was overwriting triggers.

Version:  ac225v01-02-00

Version:  ac225v01-02-01
Date:     28-3-07
* Changed process of saving events memory full/memory back to normal.

Version:  ac225v01-02-02
Date:     28-3-07
Bug Fix:
* Links - Output idle source operation was triggering operation when active,
  not when idle.

Version:  ac225v01-02-04
Date:     -4-07
* Added project for AC-525 support.
* In AC-525 project, firmware changed to work support reader tamper
  inputs read through multiplexer.

Version:  ac225v01-02-05
Date:     15-5-07
* Added commands for controlling AC-525 video module. Command sent
  immediatly after panel communication response to host PC in order to
  avoid collission with host PC transmitted data. Command sent
  asynchroneously if there are is no host PC transmitting.

Version:  ac225v01-02-06
Date:     25-5-07
* Changed Clock&Data driver to transmit more digits. Not finished.

Bug Fixed:
* Fixed Wiegand 4bits keypad support.

Version:  ac225v01-02-07
Date:     25-5-07
* Added Wiegand 37bits format: ID=16bits, Facility=10bits. Done in firmware,
  add this in PC software and in protocol.

Version:  ac225v01-02-08
Date:     2-7-07
* Changed reader section in bios.c - added RotateReaderBuff() function to
  reduce code size.

Version:  ac225v01-02-08
Date:     2-7-07
To do:
* Change Clock&Data receiving driver in bios.c to receive 14 nibbles.

Version:  ac225v01-02-09
Date:     3-7-07
* Changed Clock&Data receiving driver in bios.c to receive 14 nibbles.

Version:  ac225v01-02-10
Date:     4-7-07
* Change function dectohex() to support 14 nibbles instead of 8 nibbles.

Version:  ac225v01-02-11
Date:     4-7-07
* Fixed Clock&Data format in AC-225.
* Added flag BDoorRelayNC for setting door relay polarity as Normal Closed.

Version:  ac225v01-03-01
Date:     -7-07
* Added flag BDoorRelayNC.
* Added Wiegand37 bits format.
* Update protocol and PC SW:
	Command 38h - add flag BDoorRelayNC.
	Command 5Ah - add Wiegand37 bits format.

Version:  ac225v01-03-02
Date:     12-7-07
* Updated function RetHardwareType() and added HardwareType variable.
* Added camera outputs status (command C0h).
* Added new Links for activating cameras. Not finished.

Version:  ac225v01-03-03
Date:     16-7-07
* Updated Output functions to support camera outputs.
* Added events for camera outputs.
* Updated event filter with camera outputs events.

Version:  ac225v01-03-04
Date:     17-7-07
* Added manual activation of camera outputs.
* Added manual activation of camera outputs communication command 27h.
* Added Links Source operation AC-Fail and Low Battery.
* Added Event Filter for events AC-Fail and Low Battery.

Version:  ac225v01-03-05
Date:     2-8-07
* Activate camera outputs through MCP23016 I2C expander (AC-525 HW).

Version:  ac225v01-03-06
Date:     2-8-07
* New events AC-Fail (8Ch), AC-Restored (8Dh), Low Battery (8Eh)and
  battery OK (8Fh) added and updated event filter accordingly (AC-525 only).

Version:  ac225v01-03-07
Date:     5-8-07
Bug fix:
* IN5 to IN12 Trouble event was not working.

Version:  ac225v01-03-08
Date:     6-8-07
* Updated Power supply inputs process.
* Battery_Low input now has 15 seconds debounce machanism.

Version:  ac225v01-03-09
Date:     6-8-07
Bug fix:
* MCP23008 camera outputs locations fixed.

Version:  ac225v01-03-10
Date:     21-8-07
Bug fix:
* Input4-Input12 events were generated although MD-IO84 is not installed.

Version:  ac225v01-03-11
Date:     30-8-07
Released Versions:
1) ac215v01_03_11.hex   checksum=0x59A5
2) ac225v01_03_11.hex   checksum=0x8950
3) ac515v01_03_11.hex   checksum=0x4E62

Bug fix:
* Links window operations on OutputGroups were not functioning.

Version:  ac225v01-03-12
Date:     1-10-07
* Input delay activity updated:
  Normal Open Input: Delay on closing input only.
  Normal Closed Input: Delay on opening input only.

Version:  ac225v01-03-13
Date:     21-10-07
Updates:
* Enlarged Stack space by moving variables from IDATA to XDATA.
Bug fix:
* Event "Access Denied no PIN in Card+PIN mode" was generated due to entering
  incomplete PIN code, also reported a User.
* Event "Access Denied no PIN in Card+PIN mode" was not indicating
  at which reader the event occured.
* Event "Reader mode change by timezone Card+PIN" appears twice on entering
  Card+PIN on timezone start.
* Changing reader Secure Mode timezone from Always into another
  active timezone, the reader exited secured mode.

Version:  ac225v01-03-14
Date:     12-11-07
Bug fix:
* On manual Output activation output closed instantly if it is defined in
  "Links" to open automaticly by timezone.


Known Bugs:
* User selected output group does not work.

;---------------------------------------------------------------
; ac225v01-04-xx - Major version change: 4 Readers support
;
;---------------------------------------------------------------
Version:  ac225v01-04-00
Date:     -9-07
* Based on ac225v01-03-12
* Added support for MD-D02 reader board.

Version:  ac225v01-04-01
Date:     14-10-07
* Tested with mdd02v00_03.hex.
* Continue MD-D02 protocol implementation.
* Added Clock Arbitration on SCL2 in function I2CRxByteScl2().

Version:  ac225v01-04-02
Date:     07-11-07
* Added changes done from version ac225v01-03-12 to ac225v01-03-13.

Version:  ac225v01-04-03
Date:     12-11-07
* Compatible Md-D02: md-d02v00_04.hex.
* Update communication protocol ACCORDING with MD-D02 .
* Send LedControl to MD-D02.
* Receive reader tamper from MD-D02.
Bug fix:
* On manual Output activation output closed instantly if it is defined in
  "Links" to open automaticly by timezone.


Version:  ac225v01-04-04
Date:     15-11-07
* XDATA memory shortage!
* Code memory shortage - about 8K only remainning.
* Disabled links variable (triggers) to avoid running out of XDATA memory.
* Changed data structure to support 4 doors/readers. Make sure 2 readers
  still working as usual.

Version:  ac225v01-04-05
Date:     18-11-07

ASSUMPTIONS:
* BONEDOOR=0: 1 DOOR/4 DOOR
 BONEDOOR=1: 2 DOOR WITH 2/4 READERS.
DISABLED FEATURES:
* DISABLED LINKS FUNCTION TO ENABLE ENOUGH XDATA MEMORY.
* AC-215 FIRMWARE NOT SUPPORTS 4 READERS/DOORS.
FEATURES TO REMOVE:
* INTERLOCK FUNCTION NOT MODIFIED.
* DOOR ANTIPASSBACK NOT MODIFIED - CONSIDER REMOVING.

* Updating  init.c.
* Update: LoadDoorsSettings(), LoadReaderSettings(), LoadGlobalAPBSettings(),
  (called from init.c).

Version:  ac225v01-04-06
Date:     20-11-07
* Added constants in 225/525.h to support reader3/reader4/door3/door4.
  ac215.h not updated.

Version:  ac225v01-04-07
Date:     20-11-07
* Update main.c.
* Update functions called from main.c so that BOneDoor in eliminated:
  TestGlobalAPBTimeZone()
  TestDoorAPBTimeZone()
  TestTimedAPBTimeZone()
  TestReadersTimeZone()
  PrManReaderModes()
  PrReaderStat()
  TestClkData()
  PrReaderTamper()

Version:  ac225v01-04-08
Date:     22-11-07
* Update functions called from main.c so that BOneDoor in eliminated:
  TestSounderTriggers()
  PrAjar()
  PrForced()
  LockerPr()
  PrCodeEntry()
  LedsPr()
* Update main.c, eliminating partiotion by flag BOneDoor.
* Update functions called from PrCodeEntry():
  TurnOffLedControl()
  TestDoorAPB()
  ResetDoorAPB()
  TestGlobalAPB()
* Update more function:
  ClearCardPINDelay()
  StoreReaderDefaults()
  StoreDoorDefaults()
  TestTimers()
  LoadDoorSettings()
  LoadGlobalAPBSettings()
  StoreGlobalAPBDefaults()
  StoreInputsSettings()
  LoadReaderSettings()
  PrSounder()
  ClearUsersAPBTimeStamp()
  SetAPBForgive()
* Removed global variables: RexNo, MonitorNo.
* Update memory intialization.

Version:  ac225v01-04-09
Date:     26-11-07
* Eliminated Global bit BOneDoor, used local variable instead.
* Integrated MD-D02 inputs and outputs.
* Update more function (during debugging):
  ReadTamperReader()
  RefreshOutputs()
  CloseIndexedOutput()

Version:  ac225v01-04-10
Date:     28-11-07
* Updated communication commands:
  Command 24h - ManualReadersOperation()
  Command 34h - UpdateUserProperties()
  Command 34h - StoreEvent()
  Command 38h - UpdateDoorSettings()
  Command 40h - SendEvents()
  Command C1h - SendEvents()
  Command 54h - UpdateGlobalAPB()
  Command 5Ah - UpdateReaderSettings()
  Command EBh - SendFirmware()
* Start debugging with PC.

Version:  ac225v01-04-11
Date:     -11-07
* Debugging with PC, various small changes.
Bug Fix:
* Siren Stopped event together with Siren star event.
* Led3/Led4 not flashing in Secured Mode.
* ReaderLedControl not returnning into Red.

Version:  ac225v01-04-12
Date:     29-11-07
* Changed some local variables location from xdata into data.
* Debugging with PC, various small changes.

Version:  ac225v01-04-13
Date:     -11-07

Version:  ac225v01-04-14
Date:     30-11-07
* Debugging with PC, various small changes.

Version:  ac225v01-04-15
Date:     2-12-07
* Debugging with PC, various small changes.
* Update more function:
  TestReadersTimeZone()
* Fixed LED3/Led4 flashing problem.

Version:  ac225v01-04-16
Date:     2-12-07
* Update more function:
  Tester() - Now MD-IO84 and MD-D02 supported.
* Tested Support of multiple reader and keypad formats from reader3/reader4
  (Mifare reader formats checked).
* Fixed event filter, was filtering Reader3/Reader4/Door3/Door4.

Version:  ac225v01-04-17
Date:     4-12-07
* Updated Flash memory map due to change in User Properties from 8 bytes
  into 10 bytes.
* In 4Reader/2Door layout, fixed REX and Door output locations.
* Fixed Reader3/4 Led control activation.
* Trying Reducing consumed xdata memory space - failed, check why reducing
  TxBuff cause firmware mulfunction (many Reader1 tamper events during
  communication).
* Updated function:
  ReadEEpromData() - due to reducing transmit buffer size.

Version:  ac225v01-04-18
Date:     5-12-07
* Update functions:
  UpdatePanelSettings() - Communication command 37h.
  LoadPanelSettings()
* Updated Door Antipassback mechanism to work according reader direction.
* Temporarily Bypassed function ManualResetAPB() until it is re-defined.
* Temporarily Bypassed function TestDoorAPBTimeZone() until it is re-defined.
* Update Door antipassback to work with 4 readers - now works on IN/OUT
  readers concept.
* Timed antipassback works on 4 readers.

Version:  ac225v01-04-19
Date:     9-12-07
* Updated Global antipassback to work with 4 readers.
* Updated functions:
  SendEvents() - Global antipassback handling.
  ManualResetAPB() - Due to updating communication command 26h.

Version:  ac225v01-04-20
Date:     20-12-07
* Removed TestInterLock() support function.
* Released some Xdata memory.
* Re-activated links, now links parameters stored in EEprom rather than Xdata
  (Xdata memory is full).

Version:  ac225v01-04-21
Date:     -12-07

Version:  ac225v01-04-22
Date:     11-12-07
* Updated functions in Triggers.c:
  TestDeviceTriggers()
  PrSourceEventOutput()
  PrSourceEventInput()
  PrSourceEventReader()
  PrSourceEventDoor()
  PrSourceEventPanel()
  RetDoorNumber()
  RetReaderNumber()
  RetEventSource()
  LoadTriggerDetails()
  TestWaitFirstEntry() - Need to test after updating PC.
Bugs Fixed:
* Output Group activation in Links fixed. Need to check operation of Camera
  outputs.
* Links - Automatic output operation not working after deleting than adding
  the Link again.

Version:  ac225v01-04-23
Date:     13-12-07
* Updated Clock&Data reader to support variable data length in cards (1 to 14
  bytes).


Version:  ac225v01-04-24
Date:     16-12-07
* Recompiled the project to work on AC-215 PCB.
Bug fix:
* Clock&Data reader - passing same code twice quickly sends the code once with
  accumulated ID value.

Version:  ac225v01-04-25
Date:     17-12-07
* Reported firmware version changed.

Version:  ac225v01-04-26
Date:     20-12-07
* Checked operation of Camera outputs with links and manualy - OK.

Version:  ac225v01-04-27
Date:     20-12-07
Bugs:
* Minor bugs fixed.
* Fixed function RetEventSource().

Version:  ac225v01-04-28
Date:     24-12-07
* Changed MD-D02 communication protocol:
   Added data bytes to lreserve room for Clock&Datra.
   Transmit bit indicating reader3/reader4 type Wiegand/Clock&Data.

Version:  ac225v01-04-29
Date:     27-12-07
******** Release Version ************
Checsum: ac215v01_04_29.hex - 0x52C7
Checsum: ac225v01_04_29.hex - 0x6EC1
Checsum: ac525v01_04_29.hex - 0x6116

* Compatible with MD-D02 firmware mdd02v00_12.HEX.
* Full support of MD-D02 with Clock&Data format.
* In TestClkData() temporarily bypassed LRC testing - need to implement
  complete LRC calculation in TestClkData(), now implemented partialy in
  Bios.c.
Bug fix:
* Clearing Input[].Sampling value in void ReadWriteMD_D02() fixed.

Version:  ac225v01-04-30
Date:     02-01-08
Checsum: ac215v01_04_30.hex - 0x7509
Checsum: ac225v01_04_30.hex - 0x694A
Checsum: ac525v01_04_30.hex - 0x7FE6

* Compatible with MD-D02 firmware mdd02v00_13.HEX.
Bug fix:
* Reader3/Reader4 tamper not working.
* Fix Tester program LedControl/Reader Tamper activation.
* 2 Door/2 Readers panel, Reader2 valid codes are "Access Denied".
* Fixed location of I2C Stop Bit in ReadBlockMD_D02().

Version:  ac225v01-04-31
Date:
* Faster Inputs reaction time.
Bug fix:
* Fixed Uart Receive routine bug on receiving garbage data at 115200.

Version:  ac225v01-04-32
Date:     26-2-2008
* On disabling Reader "Open Door" checkbox - now the code is valid for Links
  operations.
Bug fix:
* Problem in Output Groups activation using Links.


Version:  ac225v01-04-33
Date:
* Each Timezone End Time can be set to 00:00 instead of 23:59.

Version:  ac225v01-04-34
Date:     13-3-2008
Bug fix:
* CommTimeOut clearing policy on receive routine changed.

Version:  ac225v01-04-35
Date:     20-3-2008
Released in AxTrax AS525 v0.02.02:
Checsum: ac215v01_04_35.hex - 0x3E66
Checsum: ac225v01_04_35.hex - 0x88B2
Checsum: ac525v01_04_35.hex - 0xA001
Bug fix:
* Flash programming crossed page.

Version:  ac225v01-04-36
Date:     -3-2008
Bug fix:
* Bug in setting Handicapped/ReaderTamper/BBellPINUser in Links at reader 0.

Version:  ac225v01-04-37
Date:     25-3-2008
* Function WriteBlockAT45() Writing serial flash data now works on crossing
  flash write pages.

Version:  ac225v01-04-39
Date:     1-4-2008
Released in AxTrax AS525 v0.02.03:
Checsum: ac215v01_04_39.hex - 0x3EDF
Checsum: ac225v01_04_39.hex - 0x5329
Checsum: ac525v01_04_39.hex - 0xAAE6

Bug fix:
* Reading serial flash functions updated for quicker single byte reading.

Version:  ac225v01-04-41
Date:     11-6-2008
* Added reader mode 6 digits/Clock&Data.
Bug fix:
* Reader1/2 mode change by timezone caused event in reader2/3/4.
* Erasing Global Antipassback in AC-215 caused firmware crash.

Version:  ac225v01-04-42
Date:     29-10-2008
******** Released Version ************
Released in AxTrax AS525 v0.02.06:
Checsum: ac215v01_04_42.hex - 0x337A
Checsum: ac225v01_04_42.hex - 0x6D5B
Checsum: ac525v01_04_42.hex - 0x3DF7

* Links - In AC215 panel limited number of operations to each source device 
  into 2 operations (instead of 8 operations.

 ******************
Changes bellow are late, and not carried into version ac225v01-05-00:
 ******************
Version:  ac225v01-04-44
Date:     31-5-2009
* Added COMM_IGNORE_RX flag - now received bytes ignored while processing 
  previous received bytes. This is done to eliminate problem of transmitting 
  wrong packets from panel. 
* GetComm() function removed into Rx interrupt, on receiving valid packet.


Version:  ac225v01-05-00
Date:     1-5-2008
******* This version is based on ac225v01-04-39 ***********
* Changed User properties command 34h to support Links by Access Denied of
  selected User.
* Updated communication command 0xC1 - Added DVR CameraA/CameraB recording
  status.
* Updated Links command 39h, added: 	Access denied User command
					DVR Cameras recording
* Updated Links system, added activation of DVR Cameras
* Updated event filter to support filtering DVR cameras.

Version:  ac225v01-05-03
Date:     -5-2008
* Eliminated "TestBit" function in order to save flash memory space.

Version:  ac225v01-05-04
Date:     3-6-2008
Bug fix:
* Reader1/2 mode change by timezone caused event in reader2/3/4.
* Erasing Global Antipassback in AC-215 caused firmware crash.

Version:  ac225v01-05-05
Date:     3-6-2008
* Added new reader mode "Clock&Data 6 digits".
* Removed Vitrax recording events (byte6=65h/66h), these events saved by PC.

Version:  ac225v01-05-06
Date:     2-7-2008
Released in AxTrax AS525 v0.03.01:
Checsum: ac215v01_05_06.hex - 0x88C8
Checsum: ac225v01_05_06.hex - 0xB7AF
Checsum: ac525v01_05_06.hex - 0x922A
Bug fix:
* REX inputs not activating doors.

Version:  ac225v01-05-07
Date:     2-7-2008
Bug fix:
* Door Forced was activated by manual door openning.
* In 2Door/4Readers panel, Door 2 Forced/Held Open was not functionning well.
* Tester program, DTR test was not functionning.

Version:  ac225v01-05-08
Date:     28-9-2008
* Links - Added new operation type "Oneshot" available when source command is
  set to Readers.

Version:  ac225v01-05-09
Date:     27-10-2008
Released in AxTrax AS525 v0.03.04:
Checsum: ac215v01_05_09.hex - 0x4476
Checsum: ac225v01_05_09.hex - 0xB525
Checsum: ac525v01_05_09.hex - 0x446C
* Links - In AC215 panel limited number of operations to each source device 
  into 2 operations (instead of 8 operations.

Version:  ac225v01-05-10
Date:     -2009
* New feature: In User access permition, add time of day limitation on user 
  Start/End dates (supported in AC-225 and AC-525 only).  
  1) Updated communication command 34h: 
     Added 4 bytes of start/stop time
     Command now sets 6 Users instead of 8 users
  2) Updated Serial Flash memory data with new UserTime table
  3) Update TestCode() - added testing user time
Bug Fixed
* Fixed event facility code data sending in PCSC Reader type.

Version:  ac225v01-06-01
Date:     23-2-2009
******** Released Version ************
Released with Axtrax 0.03.16
Checsum: ac215v01_06_01.hex - 0xB765
Checsum: ac225v01_06_01.hex - 0x24EE
Checsum: ac525v01_06_01.hex - 0x9BF5
* Removed Manual Operation (from Axtrax) "Permannetly Change Reader mode".
Bug Fixed:
* Fixed bug in adding User Start/Stop time.


Version:  ac225v01-06-02
Date:     25-02-2009
* Changed Extrenal Watchdog polarity to avoid floating state.
* Changed Readers states handling mechanism.
* Added Event 3Ah - "Reader mode changed"
* Update Event Filter with new event 3Ah filtering option.
Bug Fixed:
* Links>>Input>>Change Reader Mode: does not function (avoids implmenting Door 
  Interlock).
* Deleting "Links>>Input>>Change Reader Mode" caused reader to enter Secure 
  Mode.

Version:  ac225v01-06-03
Date:     -2009
Bug fix: 
* Vitrax recording on CAMA caused preevent recording on CAMB and vice versa.

Version:  ac225v01-06-04
Date:     1-3-2009
Bug fix: 
* TestUserDates() bug in comparing user date and time.

Version:  ac225v01-06-05
Date:     2-3-2009
Bug fix: 
* Sometimes Reset occured on Users downloading.

Version:  ac225v01-06-06
Date:     5-3-2009
* Added Door Interlock feature.
* Added event "Access denied - Door Interlock".

Version:  ac225v01-06-07
Date:     5-3-2009
******** Released Version ************
Released with Axtrax 0.03.17
Checsum: ac215v01_06_07.hex - 0x9908
Checsum: ac225v01_06_07.hex - 0xC390
Checsum: ac525v01_06_07.hex - 0xD751
Bug fix:
* "First person delay". 
* Event filter for Door Interlock.

Version:  ac225v01-06-08
Date:     8-3-2009
* Change reader driver to support simaltaneous Reader1+Reader2 reading. 
  Still not working in Clock&Data reader (processor speed limitation).

Version:  ac225v01-06-09
Date:     1-4-2009
******** Released Version ************
Released with Axtrax 0.03.19
Checsum: ac215v01_06_09.hex - 0x4516
Checsum: ac225v01_06_09.hex - 0x6401
Checsum: ac525v01_06_09.hex - 0x8620
Bug fixed:
* Door Interlock on 4Readers/2 Doors system - was not functions when accessing
  Door2 then Door1. Door1 opened even if Door2 still open.
  
Version:  ac225v01-06-10
Date:     6-5-2009
* Updated uart receive - avoid receiving until previos received packet 
  handled. This is intended to avoid tranmitting wrong packets.

Version:  ac225v01-06-11
Date:     26-5-2009
* Added COMM_IGNORE_RX flag - now received bytes ignored while processing 
  previous received bytes. This is done to eliminate problem of transmitting 
  wrong packets from panel. 
* GetComm() function removed into Rx interrupt, on receiving valid packet.

Version:  ac225v01-06-12
Date:     6-2009
* Changed watchdog clearing polarity to avoid watchdog floating (disabled) 
  input.
* Added Watchdog reset commands in critical places
* Changed intial watchdog input state to '0' to avoid watchdog floating input.  

Version:  ac225v01-06-13
Date:     6-2009
* Changed watchdog clearing polarity to avoid watchdog floating (disabled).
Bug fix:
* Updated function UpdateRetFactory() to avoid watchdog reset sometimes 
  happenning on setting new panel.

Version:  ac225v01-06-15
Date:     15-6-2009
* Added watchdog reset in function SetAPBForgive().
* Updated function ClearUsersAPBTimeStamp() for saving code space.
* Changed location of some watchdog resets.
* Removed old "changes notifications".

Version:  ac225v01-06-16
Date:     16-6-2009
* In AC-225/AC-525, using internal watchdog instead of external to avoid 
  unexpected resets on downloading users.

Version:  ac225v01-06-17
Date:     13-7-2009
******** Released Version ************
Released with Axtrax 0.03.21
Bug fix:
* Wiegand 40 bits PCSC format, handling of LRC bug in HID readers changed.
* In 2 door panel and MD-IO84 connected, IN6 triggered Forced/Heldopen alarms 
  on door2 in addition to IN2A.

Version:  ac225v01-06-18
Date:     14-9-2009
* Changed event "AC Power Fail" operation in links - operation occures as 
  power fails. 

Version:  ac225v01-06-19
Date:     15-10-2009
* Adding Access Denied events (0x35-0x39) due to wrong code entry in 
  fingerprint readers. 
Bug Fixed: 
* Users may fail to be found if it's ID resides in upper 20% of memory area.

Date:     21-10-2009
* Changes in access denied events 0x35 to 0x39. 

Date:     22-10-2009
Bug Fixed:
* Manual output operation priority increased - output opened manualy from 
  PC can only be closed by manual operation.
* Door openning by timezone setting in Links was closed after User Code entry

Changes merged from Subversion repository v83:
Version:  ac225v01-06-20
Date:     10-11-2009
* Outputs timezone activation got higher priority over Links output activation.
Bug Fixed: 
* Output Group items activated by timezone where closed by access events.

Date:     11-11-2009
Bug Fixed: 
* Cleared Manual output ststus in beginning of GeneralOutputPr().

Changes merged from Trunk version 86.
Version:  ac225v01-06-21
Date:     12-11-2009
Bug Fixed: 
* Calling OutputTimezoneStatus on erasing Link "output by timezone".
* Clearing bit in OutputTimezoneStatus().

Changes merged from Trunk version 94.
Version:  ac225v01-06-21
Date:     12-1-2010
* Eliminated unnecerry bytes in AC215 project at function WiegandInt().

Version:  ac225v01-06-22
Date:     24-1-2010
* Changed communication timeout setting (bios.c).

Date:    28-1-2010
Version:  ac225v01-06-23
* Links - added "idle" operation.

Changes merged from Subversion Trunk v108:
Date:    8-3-2010
Version:  ac225v01-06-24
******** Released Version ************
Released with Axtrax 0.03.30
* Added Wiegand 37bit long ID (16bit FC/19bit ID) operation.

Changes merged from Subversion Trunk v106:
Date:    9-3-2010
Version:  ac225v01-06-24
******** Released Version ************
Released with Axtrax 0.03.30

Date:    1-7-2010
Version:  ac225v01-06-25
Changes copied from Subversion repository 135 and 136:
* Updated mechanism to avoid upload of events already uploaded.

Date:    1-7-2010
Version:  ac225v01-06-25
Bug Fix:
* Preventing multiple events uploading on noisy communication line. This is 
  done by updating command 0xC1 (added uploaded events number).

Date:    4-7-2010
Version: ac225v03_00_00
* Changed firmware major version number from 01 into 03 to comply with Axtrax
  major version number.
  Example: Firmware ac225v03_00_00 works with Axtrax 0.03.xx.


***************************************************************
***************************************************************
***************************************************************
***************************************************************
***************************************************************
***************************************************************
***************************************************************
*********************** Video Stage 2 *************************
***************************************************************
***************************************************************
***************************************************************
***************************************************************
***************************************************************
***************************************************************
***************************************************************
Version:  ac225v01-06-50
Date:     24-6-2009
/* SVN Brancehed version */
/* Video project second stage */
* Added video board direct communication - transmit to video board.
* Added buffer VideoBuffer[] in xdata for video board direct communication.
Date:     2-7-2009
* Tested with video board firmware v_3_7_patch_uart_test4.tar.gz.
* Eliminated some global variables: 
  ReaderStatus, DestSys, SrcSys, SrcId.
Date:     6-7-2009
* Added CommVideoTimeOut as timeout timer.
* Updated TestComm();

Date:     16-7-2009
* Added PTZ Preset commands through UART activated by Links.
  Examples PTZ Preset commands:
  Camera 1 Preset1: FF 01 00 07 00 01 09 (0D ?)
  Camera 1 Preset2: FF 01 00 07 00 02 0A (0D ?)
  Camera 2 Preset1: FF 01 00 07 00 01 09 (0D ?)
  Camera 2 Preset2: FF 01 00 07 00 02 0A (0D ?)
  
* Date:     21-7-2009
* Added start/stop recording command through UART.
* Bug Fix:Fixed new bug of Door Forced.


Version:  ac225v01-06-51
Date:     27-7-2009
* Working on solution to Simaltaneous UART commands. 
* UART buffer now shared with video buffer.

* Date:  28-7-2009
* Adding support for multiple commands sent simultaneously.

* Date:  29-7-2009
* Sending PTZ command sometimes succesful, sometimes fail (maybe due uart bus 
  collision).

Version:  ac225v01-06-52
Date:     30-7-2009
* Compatible with v_3_7_patch_uart_test5.tar.gz
* Changed UART Commands structure, removed four leading "0".
* Sending "GetACK" UART command following last UART command in order to 
  receive acknowledge.

Date:     02-8-2009
* Implemented "Clip" command (Pre-event recording). 

Date:     05-8-2009
* Sending REC/CLip commands fro Links re-arranged.
* Change PTZ command and data - convert HEX data into ASCII. 
Bug fix:
* User Output Group was not functionning.

Date:     05-8-2009
* Implemented UART commands to video board: GetUSBStatus.

Date:     09-8-2009
* Added communication command 0x6C and 0xED. Not completed
* Updated UART commands mechanism - All received bytes remains in 
  receive buffer. Not debugged.

Date:     10-8-2009
* Updated UART video command implementation

Date:     11-8-2009
* Removed communication commands 0x6C and 0xED. 
* Avoiding entry into Video UART command process if not AC-525.
* Added handling of USB status request response.
* Added scanning of USB status once a minute.
* Added USB disk on key events A1h-A4h.

Date:     13-8-2009
* Updated Pr_USB().
* Added USB related events as Source events in Links. 
* Adding some timeout before sending UART command, in order to let previous
  transmissions expire.

Date:     13-8-2009
Bug fix:
* Added BlockReceivingFurtherBytes(), avoids PC commands overwriting 
  prepared videoboard commands.

Date:     16-8-2009
* Sending video board UTC date and time once a minute. Must later change to 
  once an hour and after setting AC-525 clock. Not tested. 

Date:     16-8-2009
* Updated Sending video board UTC date and time. 

Date:     19-8-2009
* Added flag "BClockHourPassed", "BSetTimeZone".
* Change setting video board time to once an hour, instead of once a minute. 
  Not tested.
* Added function for setting Timezone and Daylight - SetVideoboardTimezone(). 
* Updated communication command 37h with usb, timezone, daylight and PTZ.

Date:     23-8-2009
* Setting of video board timezone and DST.
* Updating Setting videoboard date and time considering Timezone/DST. Not 
  tested.

Date:     23-8-2009
* Version 01_07_00.
* Update EventsFilter command, adding usb related events. Not tested.

Date:     24-8-2009
* Version 01_06_54.
* Updated command 39h - Adding permannently Close option and renaming Oneshot, 
  permannently open and Follow input.
* Added programmable no communication timer (programmed by command 37h).
* In Links, added option to perform local recording when communication 
  fails.


Date:     30-8-2009
* Setting BClockHourPassed on command 62h.
* Added flag BSetTestUSB.
* Updated Video communication in comm.c - sending multiple termination "|" if 
  "DOWN" not received.

Date:     31-8-2009
* Updated UTC time calculated in SetVideoboardTime().

Date:     1-9-2009
* Updated Video communication in comm.c - avoid sending "|" when data ("DOWN") 
  received.
* Updated Dayligt command.
* SetTimezone and Daylight commands were not sent.

Date:     8-9-2009
* Excluded Uart video commands from AC-225 and AC-215 projects.

Date:     9-9-2009
Bug fix:
* Bug fix in GeneralOutputPr() and in ChangeOutState().

Date:     14-9-2009
* Changed event "AC Power Fail" operation in links - operation occures as 
  power fails. 

Version:  ac225v01-06-54
Date:     15-10-2009
* Adding Access Denied events (0x35-0x39) due to wrong code entry in 
  fingerprint readers. 
Bug Fixed: 
* Users may fail to be found if it's ID resides in upper 20% of memory area.

Version:  ac225v01-06-55
Date:     18-10-2009
* Verifying of receiving USB reply from video board. Using strstr() library
  function.

Version:  ac225v01-06-55
Date:     19-10-2009
* Parsing video board response now at end of communication process.
* Changed Compiler optimization settings to level 8 instead of level 7.

Date:     21-10-2009
* Adding Access Denied events (0x35-0x39) due to wrong code entry in 
  fingerprint readers. 
* Changes in access denied events 0x35 to 0x39. 
Bug Fixed: 
* Users may fail to be found if it's ID resides in upper 20% of memory area.

Date:     22-10-2009
Bug Fixed:
* Manual output operation priority increased - output opened manualy from 
  PC can only be closed by manual operation.
* Door openning by timezone setting in Links was closed after User Code entry

Changes merged from Subversion repository v83:
Date:     10-11-2009
* Outputs timezone activation got higher priority over Links output activation.
Bug Fixed: 
* Output Group items activated by timezone where closed by access events.

Changes merged from Trunk version 86.
Date:     12-11-2009
Bug Fixed: 
* Calling OutputTimezoneStatus on erasing Link "output by timezone".
* Clearing bit in OutputTimezoneStatus().

Date:     3-12-2009
Version: ac525v01_06_56
* Function "SetVideoboardTime()", performing sending date and time to board
  only when UTC and Local dates are the same. This to eliminate code consuming 
  calculations.
   
Date:     8-12-2009
Version: ac525v01_06_57
* Disabling sending USB status request with SetDateTime on reset. Still it 
  seems video board does not set time (only after reset).
* Updated function TestComm() to avoid sending 0xFF to video board which may
  colide with "UP|" from video board.

Date:     27-12-2009
Version: ac525v01_06_58
Bug fix:
* Sending PTZ command only on start of Link operation.
* Function TriggerOperation() Local Recording bug.
* Temporarily disabling SetDateTime UART command from AC-525 to Video due 
  to problem in Video Board firmware 3.8.

Date:    30-12-2009
Version: ac525v01_07_00
* Changing version numnber to 01_07_00
Bug fix:
* Compilation problems fixed

Date:    11-1-2009
Version: ac525v01_07_00
Bug fix:
* Fixed bug in TriggerOperation() function, all outputs opened by timezone.
* Compilation problems fixed

Date:    12-1-2009
Version: ac525v01_07_00
* Removed some AC525 specific functions from AC215 and AC225 projects.

Date:    20-1-2009
Version: ac525v01_07_01
Bug fix:
* Uart commands to video board sometimes failed. Fixed by extending 
  CommVideoSenseGPIOTimeOut delay. Video board operation still needs to be 
  verified, as it is the reasson for the problem.

Date:    24-1-2010
Version: ac525v01_07_02
Bug fix:
* Solved problem of Setting Links "Camera momentary - no communication", 
  which was working on first try only. Bug fixed by merging changes from 
  trunk. 

Version: ac525v01_07_02
* Enabled testing USB status test flag (BSetTestUSB) once a minute.

Date:    27-1-2010
Bug fix:
* Problems related to NoCommunicationTimeOut.

Date:    28-1-2010
Version:  ac225v01-07-03
* Merged changes from version 103: 
* Links - added "idle" operation.

Changed merged from Subversion Trunk v108:
Date:    8-3-2010
Version:  ac225v01-07-04
* Added Wiegand 37bit long ID (16bit FC/19bit ID) operation.


Date:    1-4-2010
Bug fix:
* SetVideoboardTime was setting wrong time. This function is still disabled in 
  code.

Date:    6-4-2010
Bug fix:
* UART commands sometimes failed when AC525-Axtrax communication was active. 
  Fix in function TestComm().

Date:    11-4-2010
Bug fix:
* More changes in UART command. Still not perfect when PC 
  communication is active.

Date:    12-4-2010
Bug fix:
* More changes in UART command. Still not perfect. 

Date:    26-4-2010
Version:  ac225v01-07-05
* Re-enabled setting videoboard timezone and daylight settings SetVideoboardTimezone(). 
* Re-enabled setting videoboard date and time SetVideoboardTime(). 
* Setting videoboard date and time directly once per hour only if no communication 
  with Axtrax.

Date:    09-5-2010
* Working copy reverted to version ac225v01-07-05 dated 26-4-2010.

Date:    09-5-2010
Version:  ac225v01-07-06
Bug Fix:
* Low memory events saved with no reasson on some panels. Function 
  TestLowEventBufferLevel() now called on storing event only.

Date:    24-5-2010
Version:  ac225v01-08-00
Compatible with Axtrax 0.04.07
* Updated commands 39h and C1h.
Bug Fix:
* Incorrect PTZ preset number sent to camera by Links (due to Vitrax bug)
* Undesirable Vitrax recording event (due to video board swapping bytes 4-5 in 
  command 0xC1)

Date:    27-5-2010
Version:  ac225v01-08-01
Bug Fix:
* Pre-alarm USB recording, recording starts but does not stop.

Date:    31-5-2010
Version:  ac225v01-08-01
* Changing Video commands sending mechanism - Adding separate buffer. Only 
  "Rec" and "Clip" commands implemented at this version.

Date:    31-5-2010
Version:  ac225v01-08-02
* Changing Video commands sending mechanism - Adding separate buffer. All 
  commands implemented.
* Reduced code size.
* Bios.c - Did not send last character after "GetACK".
Bug fix:
* Setting SetDateTime to video board ignored Daylight Status.
* Sending multiple commands to video board simultaneously did not always 
  function

Date:    31-5-2010
Version:  ac225v01-08-02
* Eliminated variable VideoNoOfBytes.

Date:    1-6-2010
Version:  ac225v01-08-02
* Testing USB with some delay after minute changed to avoid simultaneous 
  commands to video board.
Bug fix:
* Setting video board time in negativ time zones (West to GMT). 
* Changed MAX_TX_VIDEO_BUFFER and MAX_TX_VIDEO_QUEUE_BUFFER buffer size.

Date:    1-6-2010
Version:  ac225v01-08-02
Bug fix:
* Video board command "Clip" start problem.

Date:    2-6-2010
Version:  ac225v01-08-03
* Add memory protection on video commands Tx buffer. If video command Buffer 
  becomes full, the next video command will overwrite all previosly stored 
  commands.

Date:    2-6-2010
Version:  ac225v01-08-04
Bug fix:
* Video command "Clip camera B" sent to camera A.

Date:    8-6-2010
Version:  ac225v01-08-04
* Commands to video board are re-sent if not responded (up to 3 times). 
Bug fix:
* "UP|" response from video board sometimes not received (when streaming 
  active). Extended waiting timeout solves this problem.
* "DOWN|" response from video board sometimes not received. Extended 
  waiting timeout reduces this problem. Max timeout is limited because 
  video board aborts before sending "DOWN" due to it's own timeout.

Date:    9-6-2010
Version:  ac225v01-08-04
Bug fix:
* Camera2 Recording Stop command failed because sent to camera1.

Date:    16-6-2010
Version:  ac225v01-08-05
Bug fix:
* Setting TxEnable 150mSec before starting video command (before clearing GPIO 
  to video board) in order to avoid collisions by PC or other panel 
  communications.
Date:    22-6-2010
Version: ac225v01-08-06
* Updated mechanism to avoid upload of events already uploaded (Events.c).

Date:    22-6-2010
Version: ac225v01-08-06
Bug fix:
* Full upload on enabling new panel (this problem from previous version today)
				    
Date:    22-6-2010
Version: ac225v01-08-06
Bug fix:
* Full upload on enabling new panel (this problem from previous version today)

Date:    1-7-2010
Version:  ac225v01-09-00
Changes merged from Trunk v138
Bug Fix:
* Preventing multiple events uploading on noisy communication line. This is 
  done by updating command 0xC1 (added uploaded events number).

Date:    4-7-2010
Version: ac225v04_00_00
* Changed firmware major version number from 01 into 04 to comply with Axtrax
  major version number.
  Example: Firmware ac225v04_00_00 works with Axtrax 0.04.xx.




Date:    4-8-2010
Version: ac225v04_00_01
* Bug Fix:
  * Alarm in forced open not all the event was received.
  * Links output follow and negative follow
Added support in duress code in AY-Bx660 AY-Bx663 readers.


Date: 5 aug 10
version: ac225v04_00_02
* Bug Fix:
* Links output follow and negative follow last version was problem with automatic operation link.

Date: 10 jan 11
version: ac225v04_00_03
* Bug Fix:
failed report in clk&da 
not released

Date: 23 feb 11
version: ac215v04_00_04 (only)
fix - hardware problem with eeprom we reduce the rate of I2C to suitable with new eeprom

Date: 14 april 11
version: ac215v04_00_07 ac225v04_00_07
add - wiegand 34 from hid card

Date: 1 july 11
version: ac215v04_00_05 ac225v04_00_05
fix - door apb add small delay

Date: 11 july 11
version:ac215v04_00_10 ac225v04_00_10 ac525v04_00_10 
add - wiegand 37 rosslare(three first bit ignore ) other as 34

Date: 25 october 11
version:ac215v04_00_11 ac225v04_00_11 ac525v04_00_11 
fix - wiegand 37 rosslare according customer request

Date: 14 nov 11
version:ac225v04_00_14 
update - last chnge

Date: 19 july 11
version:ac215v04_00_20
fix - reduce the I2C rate because the panel reset all the time

Date: 24 feb 11
version: ac225v04_01_00
change to new protocol(425) all the boards need to change to new protocol o1 and up new protocol new AxTrax.


Date: 28 march 11
version: ac225v04_01_01
fix - bug in reader manual

Date: 3 may 11
version: ac425v04_01_03 suitable to AxTraxNG 0.7.0 up.
fix - ac425 camera output

Date: 18 may 11
version: ac525,ac425,ac225,ac215 v04_02_00 
add - antipassback timer enhance the range from 255 min to 24 hour change protocol
fix - ac525 ac225 ac215 camera output

Date: 3 july 11
version:ac425 04_02_01 
fix - extended door time

Date: 11 july 11
version:ac215v04_02_02 ac225v04_02_02 ac525v04_02_02 ac425v04_02_03
add - wiegand 37 rosslare(three first bit ignore ) other as 34

Date: 25 july 11
version:ac215v04_02_03 ac225v04_02_03 ac525v04_02_03 ac425v04_02_04
fix - modem

Date: 18 aug 11
version:ac215v04_02_04 ac225v04_02_04 ac525v04_02_04 ac425v04_02_05
fix - local recording and dvr recording

Date: 1 sep 11
version:ac215v04_02_07 ac225v04_02_07 ac525v04_02_07 ac425v04_02_07
fix - global apb
fix - automatic operation
fix - manual operation in reader

Date: 6 dec 11
version:ac215v04_02_09 ac225v04_02_09 ac525v04_02_09 ac425v04_02_09
fix - trigger input when you delete trigger of input it return to arm before it returned to disarm

Date: 13 dec 11
version:ac215v04_03_00 ac225v04_03_00 ac525v04_03_00 ac425v04_03_00
add - crc 16 instead of checksum

Date: 18 jan 12
version:ac215v04_03_02 ac225v04_03_02 ac525v04_03_02 ac425v04_03_02
add - first person create event
add - new wiegand format according "Farnell" customer in Norway. wiegand 37 (AWID)
fix - bug in reader secure mode
fix - reduce I2C to 333 kHz due the problem in EEPROM in cold (from Toby QA)

Date: 22 feb 12
version:ac215v04_03_06 ac225v04_03_06 ac525v04_03_06 ac425v04_03_06
fix - crc algorithm
fix - link on operation input arm and disarm

Date: 29 feb 12
version:ac215v04_02_11 ac225v04_02_11 ac525v04_02_11 ac425v04_02_11
return to checksum in packetS

Date: 5 fapr 12
version: ac425v04_02_15
fix - problem with MD-D04 that sent '1' instead of '0' in start of wiegand data. bypass for prevent the problem. need to fix the MD-D04 problem.

Date: 3 july 12
version: 
AC215 - ac215v04_04_04 
add - crc for each communication packet,supprt in goProx reader
fix - links

AC225 - ac225v04_04_04
AC425 - ac425v04_04_18
AC525 - ac525v04_04_00
add - crc for each communication packet,supprt in goProx reader,
      duress code(PiN code),card + card,car parking,antipassback immunity by timezone
fix - links

Date: 1 August 12
version: 
AC215 - ac215v04_04_06
AC225 - ac225v04_04_06
AC425 - ac425v04_04_21
AC525 - ac525v04_04_03 
fix - internal bugs

Date: 9 August 12
version: 
AC215 - ac215v04_04_08
AC225 - ac225v04_04_08
AC425 - ac425v04_04_23
AC525 - ac525v04_04_05 
fix - door held open with auto relock (on door monitor closed and opened)
fix - card + card mode

Date: 29 August 12
version: 
AC215 - ac215v04_04_09
AC225 - ac225v04_04_09
AC425 - ac425v04_04_24
AC525 - ac525v04_04_07 
fix - ac525 REX that don't work
add - internal changes

Date: 23 September 12
version: 
AC215 - ac215v04_04_10
AC225 - ac225v04_04_10
AC525 - ac525v04_04_10
AC425 - ac425v04_04_26
fix - Test mode only

Date: 17 October 12
version: 
AC215 - ac215v04_05_09
AC225 - ac225v04_05_09
AC525 - ac525v04_05_09
AC425 - ac425v04_05_09
add - New board ac215IP version - ac215IPv04_05_09
add - support two format per reader
add - led control on while the door is openning.
fix - problem with event filter
fix - input and output groups link

Date: 12 November 12
version: 
AC215   - ac215v04_05_10
AC215IP - ac215IPv04_05_10
AC225   - ac225v04_05_10
AC525   - ac525v04_05_10
AC425   - ac425v04_05_10
fix - output automatic operation

Date: 27 November 12
version: 
AC425   - ac425v04_05_11
fix - the process in link "Output groups selected by user"
      by fixed "RetDoorNumber" - function.
AC215IP - ac215IPv04_05_11 - internal changes
AC225   - ac225v04_05_11 - internal changes
AC525   - ac525v04_05_11 - internal changes

Date: 9 december 12
version: 
AC525   - ac525v04_05_12
fix - link on "low battery"

Date: 29 January 13
version: 
AC215   - ac215v04_05_20
AC215IP - ac215IPv04_05_20
AC225   - ac225v04_05_20
AC525   - ac525v04_05_20
AC425   - ac425v04_05_20
fix - door output polarity normaly closed
fix - link on access denied in group of car parking

Date: 20 March 13
version: 
AC215   - ac215v04_05_21
AC215IP - ac215IPv04_05_21
AC225   - ac225v04_05_21
AC525   - ac525v04_05_21
AC425   - ac425v04_05_21
fix - transport between wiegand to clock and data
fix - ac425 - problem in "first person delay" in MD-D04

Date: 1 May 13
version: 
AC215   - ac215v04_05_25
AC215IP - ac215IPv04_05_23
AC225   - ac225v04_05_25
AC525   - ac525v04_05_23
AC425   - ac425v04_05_23
fix - output group selected by user(ac425)
fix - card parking links(ac525)
fix - card parking + global apb
fix - output automatic operation(exit  from timezone) from customet in usa.
fix - problem in 'scap' (ac215,ac225)

Date: 30 May 13
version: 
AC215   - ac215v04_05_26
AC215IP - ac215IPv04_05_26
AC225   - ac225v04_05_26
AC525   - ac525v04_05_26
AC425   - ac425v04_05_26
fix - output normally close once enter to state
fix - output normally close with interlock


Date: 30 Jul 13
version: 
AC215   - ac215v04_05_27
AC215IP - ac215IPv04_05_27
AC225   - ac225v04_05_27
AC525   - ac525v04_05_63
AC425   - ac425v04_05_27


Date: 29 Aug 13
version: 
AC215   - ac215v04_05_30
AC215IP - ac215IPv04_05_30
AC225   - ac225v04_05_30
AC525   - ac525v04_05_30
AC425   - ac425v04_05_64

fix - output normally close (Comment 6 on AC215IP/AC215: Door 2 output polarity function NG)
fix - door forced in output normaly close (Comment 3 on AC425/AC225: If the door output polarity is closed, door forced open function NG)
fix - interlock with REX. until now interlock was only with ID not with REX.
fix - all 3 problems with outpout NC mail from DV in 16 August 13
fix - fixed wiegand custom format reversed bytes.
fix - tester in ac425 for working with MD-D04 in test mode.

add = AC425 - selectable input between REX or Door Monitor.

Date: 5 Mar 14
version: 
AC215   - ac215v04_05_40
AC215IP - ac215IPv04_05_40
AC225   - ac225v04_05_40
AC525   - ac525v04_05_40
AC425   - ac425v04_05_70

added = able to receive 2 cards one after the other
fixed - AC425 interlock
fixed - problems with 'auto relock'
fixed - card + card link

Date: 1 Apr 14
version: 
AC215   - ac215v04_07_01
AC215IP - ac215IPv04_07_01
AC225   - ac225v04_07_01
AC525   - ac525v04_07_01
AC425   - ac425v04_07_01

added(not AC215) - 16 sectors time per day in the timezone (until now it was 8).
added(not AC215) - to select 2 or 3 users for card + card.

8 May 14
version: 
AC215   - ac215v04_07_02
AC215IP - ac215IPv04_07_02
AC225   - ac225v04_07_02
AC525   - ac525v04_07_02
AC425   - ac425v04_07_02

fixed - bug from DV "auto relock" when door open and door forced set.
fixed - bug from DV card + card with 3 users. (1-2-1)
fixed - bug in Timed APB

15 August 14
AC215 - ac215v04_07_04
this version support 60 tz, but don't have timed and door antipassback

21 Dec 14
AC215 - ac215v04_07_13
fixed - problem with timezones

1 Feb 15
AC425 - ac425v04_07_06
fixed - problem with timezones

29 Nov 15
AC215   - ac215v04_07_20
AC215IP - ac215IPv04_07_20
AC225   - ac225v04_07_20
AC425   - ac425v04_07_20
changed - received inputs within 50 ms instead of 200 ms in last versions.

18 Jan 16
AC215   - ac215v04_08_00
AC215IP - ac215IPv04_08_00
AC225   - ac225v04_08_00
AC425   - ac425v04_08_00
added - time antipassback with resolution of seconds.

4 Apr 17
AC425   - ac425v04_08_01
fixed - time antipassback. (in the last version the time apb doesn't work).

6 Apr 17
AC215   - ac215v04_08_01
AC215IP - ac215IPv04_08_01
AC225   - ac225v04_08_01
AC425   - ac425v04_08_02
fixed - soft time antipassback (in the last versions it is not working).

18 June 17
AC425 - ac425v04_08_02
updated - this version is without the HW test. (The test should do with version ac425v04_08_00)

21 June 17
AC425 - ac425v04_08_04
updated - return the HW test function.
updated - internal rearrange for reduce code. (must be tested by DV)

31 Dec 17
AC425 - ac425v04_08_07
fixed - time apb
AC215 - ac215v04_08_02
fixed - card+pin


14 Jan 19
AC425 - ac425v05_01_04
AC225 - ac225v05_01_04
AC215B - ac215Bv05_01_04

add - 'dual authentication'
fixed - bug number'6326'



5 May 19
Versions for AxTraxNG version 27.5.
AC215 - ac215v04_08_22
AC215B - ac215Bv05_00_21
AC225 - ac225v05_00_21
AC425 - ac425v05_00_22
fixed - bug 6688 - suddenly the communication between the AxTraxNG and panel stopped till reset.
		   we saw that the code has flag that in one situation this flag is set always and doesn't
		   give the code to receive bytes from the uart. We add timeout for this situation. In addition 
		   if it is occur we do reset after 1 min.
	bug 7577 - Writing to Eeprom buffer of 256 bytes. But the EEPROM has pages of 128 bytes only.
		   It caused to panel to do reset by watchdog in some panels.
		   We fixed it by split the buffer to buffers of 128 bytes.

Versions for AxTraxNG version 27.6.
AC215 - ac215v04_08_22
AC215B - ac215Bv05_01_09
AC225 - ac225v05_01_09
AC425 - ac425v05_01_09
fixed - bug 7578 - suddenly the communication between the AxTraxNG and panel stopped till reset.
		   we saw that the code has flag that in one situation this flag is set always and doesn't
		   give the code to receive bytes from the uart. We add timeout for this situation. In addition 
		   if it is occur we do reset after 1 min.
added - bug 7578 - Event before we do the reset that no communication for 1 min.

fixed - bug 7511 - Writing to Eeprom buffer of 256 bytes. But the EEPROM has pages of 128 bytes only.
		   It caused to panel to do reset by watchdog in some panels.
		   We fixed it by split the buffer to buffers of 128 bytes.
fixed - bug 7325 - Leds in 'Test Mode' (not in AC425).
		   In HW 'TestMode' the LEDs 3 & 4 don't behave as written in the test spec.
		   The Problem come from the change of this version that the LED control is follow the output state and change the 
		   function of the LEDs.
		   We added some lines in 'TestMode' function for implement it.
fixed - bug 7488 - 'User_counter' disable in user properties but in run time it seems it is 'enable' (not in AC425).
		   The problem is that we did mistake in the address of the user counetr.
		   We change it to the correct address.

added - protection in 'bios.c' for not overflow of RxBuffer (not in AC425). We suspect that we have state that the
		   code anter to 'overflow' state sue the 'Modem' states.


Versions for AxTraxNG version 27.7.
AC215B - ac215Bv05_01_10
AC225 - ac225v05_01_10
AC425 - ac425v05_01_10
20 May 19
fixed - bug 7722 - no links for car parking.
		   It was missing the reading of the field of 'car parking' link.
		   We return it as the old versions.

Versions for AxTraxNG version 27.7.
AC215B - ac215Bv05_01_11
AC225 - ac225v05_01_11
AC425 - ac425v05_01_12
19 June 19
fixed - bug 7797 - problem with timezones in AC425,
fixed - not reset APB users once the panel do reset (215B,225,425)

Versions for AxTraxNG version 27.7.
AC215B - ac215Bv05_01_12
AC225 - ac225v05_01_12
23 July 19
fixed - bug 7988 - problem with APB immunity that doesn't work

Versions for AxTraxNG version 27.7.
AC215 - ac215v04_08_23
29 July 19
fixed - problem with invalid date in users.

Versions for AxTraxNG version 27.7.
AC225 - ac225v05_01_20 (23 Sep 19)
AC425 - ac225v05_01_20 (30 Oct 19)
AC215B - ac215Bv05_01_20 (30 Oct 19)
fixed - bug 8208
added - 1. maximum number of cards and keypad for decrease the search time.
	2. once we received '#', we check if we received before it 4 keys then go to search if not reset the counter of keys.
	
	Versions for AxTraxNG version 27.7.
AC225 - ac225v05_01_21 (14 Nov 19)
AC425 - ac225v05_01_21 (14 Nov 19)
AC215B - ac215Bv05_01_21 (14 Nov 19)
added - for fixing recognition of MD-xx:
		search 10 times if the panel has MD-xx (in addition in this time disable the interrupts)
fixed - bug 8200

AC225 - ac225v05_01_22 (18 Nov 19)
AC425 - ac225v05_01_22 (18 Nov 19)
AC215B - ac215Bv05_01_22 (18 Nov 19)
fixed - in code.c, function 'RestoreIdForDualAuthentication' adding 2 lines for arrange the 'session' variable.
trial to fix - bug 8404

AC225 - ac225v05_01_23 (8 Dec 19)
AC425 - ac225v05_01_23 (8 Dec 19)
AC215B - ac215Bv05_01_23 (8 Dec 19)
removed - the feature that the controoler do self reset if it detect 1 min. without commuinication with the server.
related to solve to bug 8484.